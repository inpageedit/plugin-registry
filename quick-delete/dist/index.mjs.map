{"version":3,"file":"index.mjs","sources":["../../../node_modules/.pnpm/jsx-dom@8.1.6/node_modules/jsx-dom/index.js","../../../common/Promise.withResolvers.ts","../../../common/defineIPEPlugin.ts","../src/index.tsx"],"sourcesContent":["/* eslint-disable */\nconst keys = Object.keys;\nfunction identity(value) {\n  return value;\n}\nfunction isBoolean(val) {\n  return typeof val === \"boolean\";\n}\nfunction isElement(val) {\n  return val && typeof val.nodeType === \"number\";\n}\nfunction isString(val) {\n  return typeof val === \"string\";\n}\nfunction isNumber(val) {\n  return typeof val === \"number\";\n}\nfunction isObject(val) {\n  return typeof val === \"object\" ? val !== null : isFunction(val);\n}\nfunction isFunction(val) {\n  return typeof val === \"function\";\n}\nfunction isComponentClass(Component) {\n  return !!(Component && Component.isComponent);\n}\nfunction isArrayLike(obj) {\n  return (\n    isObject(obj) &&\n    typeof obj.length === \"number\" &&\n    typeof obj.nodeType !== \"number\"\n  );\n}\nfunction forEach(value, fn) {\n  if (!value) return;\n  for (const key of keys(value)) {\n    fn(value[key], key);\n  }\n}\n\nfunction createRef() {\n  return Object.seal({\n    current: null,\n  });\n}\nfunction isRef(maybeRef) {\n  return isObject(maybeRef) && \"current\" in maybeRef;\n}\n\n/**\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found on\n * https://github.com/facebook/react/blob/b87aabdfe1b7461e7331abb3601d9e6bb27544bc/LICENSE\n */\n\n/**\n * CSS properties which accept numbers but are not in units of \"px\".\n */\nconst isUnitlessNumber = {\n  animationIterationCount: 0,\n  borderImageOutset: 0,\n  borderImageSlice: 0,\n  borderImageWidth: 0,\n  boxFlex: 0,\n  boxFlexGroup: 0,\n  boxOrdinalGroup: 0,\n  columnCount: 0,\n  columns: 0,\n  flex: 0,\n  flexGrow: 0,\n  flexPositive: 0,\n  flexShrink: 0,\n  flexNegative: 0,\n  flexOrder: 0,\n  gridArea: 0,\n  gridRow: 0,\n  gridRowEnd: 0,\n  gridRowSpan: 0,\n  gridRowStart: 0,\n  gridColumn: 0,\n  gridColumnEnd: 0,\n  gridColumnSpan: 0,\n  gridColumnStart: 0,\n  fontWeight: 0,\n  lineClamp: 0,\n  lineHeight: 0,\n  opacity: 0,\n  order: 0,\n  orphans: 0,\n  tabSize: 0,\n  widows: 0,\n  zIndex: 0,\n  zoom: 0,\n  // SVG-related properties\n  fillOpacity: 0,\n  floodOpacity: 0,\n  stopOpacity: 0,\n  strokeDasharray: 0,\n  strokeDashoffset: 0,\n  strokeMiterlimit: 0,\n  strokeOpacity: 0,\n  strokeWidth: 0,\n};\n\n/**\n * @param prefix vendor-specific prefix, eg: Webkit\n * @param key style name, eg: transitionDuration\n * @return style name prefixed with `prefix`, properly camelCased, eg:\n * WebkitTransitionDuration\n */\nfunction prefixKey(prefix, key) {\n  return prefix + key.charAt(0).toUpperCase() + key.substring(1);\n}\n\n/**\n * Support style names that may come passed in prefixed by adding permutations\n * of vendor prefixes.\n */\nconst prefixes = [\"Webkit\", \"ms\", \"Moz\", \"O\"];\n// Using Object.keys here, or else the vanilla for-in loop makes IE8 go into an\n// infinite loop, because it iterates over the newly added props too.\nkeys(isUnitlessNumber).forEach((prop) => {\n  prefixes.forEach((prefix) => {\n    isUnitlessNumber[prefixKey(prefix, prop)] = 0; // isUnitlessNumber[prop]\n  });\n});\n\nconst jsxDomType = Symbol.for(\"jsx-dom:type\");\nvar JsxDomType = /*#__PURE__*/ (function (JsxDomType) {\n  JsxDomType[\"ShadowRoot\"] = \"ShadowRoot\";\n  return JsxDomType;\n})(JsxDomType || {});\nfunction ShadowRoot(_ref) {\n  let { children, ref, ...attr } = _ref;\n  return {\n    [jsxDomType]: JsxDomType.ShadowRoot,\n    ref,\n    attr,\n    children,\n  };\n}\nfunction isShadowRoot(el) {\n  return el != null && el[jsxDomType] === JsxDomType.ShadowRoot;\n}\n\nconst SVGNamespace = \"http://www.w3.org/2000/svg\";\nconst XLinkNamespace = \"http://www.w3.org/1999/xlink\";\nconst XMLNamespace = \"http://www.w3.org/XML/1998/namespace\";\n\n// https://facebook.github.io/react/docs/jsx-in-depth.html#booleans-null-and-undefined-are-ignored\n// Emulate JSX Expression logic to ignore certain type of children or className.\nfunction isVisibleChild(value) {\n  return !isBoolean(value) && value != null;\n}\n\n/**\n * Convert a `value` to a className string.\n * `value` can be a string, an array or a `Dictionary<boolean>`.\n */\nfunction className(value) {\n  if (Array.isArray(value)) {\n    return value.map(className).filter(Boolean).join(\" \");\n  } else if (isObject(value)) {\n    if (Symbol.iterator in value) {\n      return className(Array.from(value));\n    }\n    return keys(value)\n      .filter((k) => value[k])\n      .join(\" \");\n  } else if (isVisibleChild(value)) {\n    return \"\" + value;\n  } else {\n    return \"\";\n  }\n}\nconst svg = {\n  animate: 0,\n  circle: 0,\n  clipPath: 0,\n  defs: 0,\n  desc: 0,\n  ellipse: 0,\n  feBlend: 0,\n  feColorMatrix: 0,\n  feComponentTransfer: 0,\n  feComposite: 0,\n  feConvolveMatrix: 0,\n  feDiffuseLighting: 0,\n  feDisplacementMap: 0,\n  feDistantLight: 0,\n  feFlood: 0,\n  feFuncA: 0,\n  feFuncB: 0,\n  feFuncG: 0,\n  feFuncR: 0,\n  feGaussianBlur: 0,\n  feImage: 0,\n  feMerge: 0,\n  feMergeNode: 0,\n  feMorphology: 0,\n  feOffset: 0,\n  fePointLight: 0,\n  feSpecularLighting: 0,\n  feSpotLight: 0,\n  feTile: 0,\n  feTurbulence: 0,\n  filter: 0,\n  foreignObject: 0,\n  g: 0,\n  image: 0,\n  line: 0,\n  linearGradient: 0,\n  marker: 0,\n  mask: 0,\n  metadata: 0,\n  path: 0,\n  pattern: 0,\n  polygon: 0,\n  polyline: 0,\n  radialGradient: 0,\n  rect: 0,\n  stop: 0,\n  svg: 0,\n  switch: 0,\n  symbol: 0,\n  text: 0,\n  textPath: 0,\n  tspan: 0,\n  use: 0,\n  view: 0,\n};\nconst nonPresentationSVGAttributes =\n  /^(a(ll|t|u)|base[FP]|c(al|lipPathU|on)|di|ed|ex|filter[RU]|g(lyphR|r)|ke|l(en|im)|ma(rker[HUW]|s)|n|pat|pr|point[^e]|re[^n]|s[puy]|st[^or]|ta|textL|vi|xC|y|z)/;\nfunction createFactory(tag) {\n  return createElement.bind(null, tag);\n}\nfunction Fragment(attr) {\n  const fragment = document.createDocumentFragment();\n  appendChild(attr.children, fragment);\n  return fragment;\n}\nclass Component {\n  static isComponent = true;\n  constructor(props) {\n    this.props = props;\n  }\n  render() {\n    return null;\n  }\n}\nfunction initComponentClass(Class, attr, children) {\n  attr = {\n    ...attr,\n    children,\n  };\n  const instance = new Class(attr);\n  const node = instance.render();\n  if (\"ref\" in attr) {\n    attachRef(attr.ref, instance);\n  }\n  return node;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nfunction jsx(tag, _ref) {\n  let { children, ...attr } = _ref;\n  if (!attr.namespaceURI && svg[tag] === 0) {\n    attr = {\n      ...attr,\n      namespaceURI: SVGNamespace,\n    };\n  }\n  let node;\n  if (isString(tag)) {\n    node = attr.namespaceURI\n      ? document.createElementNS(attr.namespaceURI, tag)\n      : document.createElement(tag);\n    attributes(attr, node);\n    appendChild(children, node);\n\n    // Select `option` elements in `select`\n    if (node instanceof window.HTMLSelectElement && attr.value != null) {\n      if (attr.multiple === true && Array.isArray(attr.value)) {\n        const values = attr.value.map((value) => String(value));\n        node\n          .querySelectorAll(\"option\")\n          .forEach(\n            (option) => (option.selected = values.includes(option.value)),\n          );\n      } else {\n        node.value = attr.value;\n      }\n    }\n    attachRef(attr.ref, node);\n  } else if (isFunction(tag)) {\n    // Custom elements.\n    if (isObject(tag.defaultProps)) {\n      attr = {\n        ...tag.defaultProps,\n        ...attr,\n      };\n    }\n    node = isComponentClass(tag)\n      ? initComponentClass(tag, attr, children)\n      : tag({\n          ...attr,\n          children,\n        });\n  } else {\n    throw new TypeError(`Invalid JSX element type: ${tag}`);\n  }\n  return node;\n}\nfunction createElement(tag, attr) {\n  for (\n    var _len = arguments.length,\n      children = new Array(_len > 2 ? _len - 2 : 0),\n      _key2 = 2;\n    _key2 < _len;\n    _key2++\n  ) {\n    children[_key2 - 2] = arguments[_key2];\n  }\n  if (isString(attr) || Array.isArray(attr)) {\n    children.unshift(attr);\n    attr = {};\n  }\n  attr = attr || {};\n  if (attr.children != null && !children.length) {\n    ({ children, ...attr } = attr);\n  }\n  return jsx(\n    tag,\n    {\n      ...attr,\n      children,\n    },\n    attr.key,\n  );\n}\nfunction attachRef(ref, node) {\n  if (isRef(ref)) {\n    ref.current = node;\n  } else if (isFunction(ref)) {\n    ref(node);\n  }\n}\nfunction appendChild(child, node) {\n  if (isArrayLike(child)) {\n    appendChildren(child, node);\n  } else if (isString(child) || isNumber(child)) {\n    appendChildToNode(document.createTextNode(child), node);\n  } else if (child === null) {\n    appendChildToNode(document.createComment(\"\"), node);\n  } else if (isElement(child)) {\n    appendChildToNode(child, node);\n  } else if (isShadowRoot(child)) {\n    const shadowRoot = node.attachShadow(child.attr);\n    appendChild(child.children, shadowRoot);\n    attachRef(child.ref, shadowRoot);\n  }\n}\nfunction appendChildren(children, node) {\n  for (const child of [...children]) {\n    appendChild(child, node);\n  }\n  return node;\n}\nfunction appendChildToNode(child, node) {\n  if (node instanceof window.HTMLTemplateElement) {\n    node.content.appendChild(child);\n  } else {\n    node.appendChild(child);\n  }\n}\nfunction normalizeAttribute(s, separator) {\n  return s.replace(/[A-Z]/g, (match) => separator + match.toLowerCase());\n}\nfunction style(node, value) {\n  if (value == null || value === false);\n  else if (Array.isArray(value)) {\n    value.forEach((v) => style(node, v));\n  } else if (isString(value)) {\n    node.setAttribute(\"style\", value);\n  } else if (isObject(value)) {\n    forEach(value, (val, key) => {\n      if (key.indexOf(\"-\") === 0) {\n        // CSS custom properties (variables) start with `-` (e.g. `--my-variable`)\n        // and must be assigned via `setProperty`.\n        node.style.setProperty(key, val);\n      } else if (isNumber(val) && isUnitlessNumber[key] !== 0) {\n        node.style[key] = val + \"px\";\n      } else {\n        node.style[key] = val;\n      }\n    });\n  }\n}\nfunction attribute(key, value, node) {\n  switch (key) {\n    case \"xlinkActuate\":\n    case \"xlinkArcrole\":\n    case \"xlinkHref\":\n    case \"xlinkRole\":\n    case \"xlinkShow\":\n    case \"xlinkTitle\":\n    case \"xlinkType\":\n      attrNS(node, XLinkNamespace, normalizeAttribute(key, \":\"), value);\n      return;\n    case \"xmlnsXlink\":\n      attr(node, normalizeAttribute(key, \":\"), value);\n      return;\n    case \"xmlBase\":\n    case \"xmlLang\":\n    case \"xmlSpace\":\n      attrNS(node, XMLNamespace, normalizeAttribute(key, \":\"), value);\n      return;\n  }\n  switch (key) {\n    case \"htmlFor\":\n      attr(node, \"for\", value);\n      return;\n    case \"dataset\":\n      forEach(value, (dataValue, dataKey) => {\n        if (dataValue != null) {\n          node.dataset[dataKey] = dataValue;\n        }\n      });\n      return;\n    case \"innerHTML\":\n    case \"innerText\":\n    case \"textContent\":\n      if (isVisibleChild(value)) {\n        node[key] = value;\n      }\n      return;\n    case \"dangerouslySetInnerHTML\":\n      if (isObject(value)) {\n        node.innerHTML = value[\"__html\"];\n      }\n      return;\n    case \"value\":\n      if (value == null || node instanceof window.HTMLSelectElement) {\n        // skip nullish values\n        // for `<select>` apply value after appending `<option>` elements\n        return;\n      } else if (node instanceof window.HTMLTextAreaElement) {\n        node.value = value;\n        return;\n      }\n      // use attribute for other elements\n      break;\n    case \"spellCheck\":\n      node.spellcheck = value;\n      return;\n    case \"class\":\n    case \"className\":\n      if (isFunction(value)) {\n        value(node);\n      } else {\n        attr(node, \"class\", className(value));\n      }\n      return;\n    case \"ref\":\n    case \"namespaceURI\":\n      return;\n    case \"style\":\n      style(node, value);\n      return;\n    case \"on\":\n    case \"onCapture\":\n      forEach(value, (eventHandler, eventName) => {\n        node.addEventListener(eventName, eventHandler, key === \"onCapture\");\n      });\n      return;\n    // fallthrough\n  }\n  if (isFunction(value)) {\n    if (key[0] === \"o\" && key[1] === \"n\") {\n      let attribute = key.toLowerCase();\n      const useCapture = attribute.endsWith(\"capture\");\n      if (attribute === \"ondoubleclick\") {\n        attribute = \"ondblclick\";\n      } else if (useCapture && attribute === \"ondoubleclickcapture\") {\n        attribute = \"ondblclickcapture\";\n      }\n      if (!useCapture && node[attribute] === null) {\n        // use property when possible PR #17\n        node[attribute] = value;\n      } else if (useCapture) {\n        node.addEventListener(\n          attribute.substring(2, attribute.length - 7),\n          value,\n          true,\n        );\n      } else {\n        let eventName;\n        if (attribute in window) {\n          // standard event\n          // the JSX attribute could have been \"onMouseOver\" and the\n          // member name \"onmouseover\" is on the window's prototype\n          // so let's add the listener \"mouseover\", which is all lowercased\n          const standardEventName = attribute.substring(2);\n          eventName = standardEventName;\n        } else {\n          // custom event\n          // the JSX attribute could have been \"onMyCustomEvent\"\n          // so let's trim off the \"on\" prefix and lowercase the first character\n          // and add the listener \"myCustomEvent\"\n          // except for the first character, we keep the event name case\n          const customEventName = attribute[2] + key.slice(3);\n          eventName = customEventName;\n        }\n        node.addEventListener(eventName, value);\n      }\n    }\n  } else if (isObject(value)) {\n    node[key] = value;\n  } else if (value === true) {\n    attr(node, key, \"\");\n  } else if (value !== false && value != null) {\n    if (node instanceof SVGElement && !nonPresentationSVGAttributes.test(key)) {\n      attr(node, normalizeAttribute(key, \"-\"), value);\n    } else {\n      attr(node, key, value);\n    }\n  }\n}\nfunction attr(node, key, value) {\n  node.setAttribute(key, value);\n}\nfunction attrNS(node, namespace, key, value) {\n  node.setAttributeNS(namespace, key, value);\n}\nfunction attributes(attr, node) {\n  for (const key of keys(attr)) {\n    attribute(key, attr[key], node);\n  }\n  return node;\n}\n\nfunction useText(initialValue) {\n  const text = new Text();\n  Object.defineProperty(text, \"toString\", {\n    value() {\n      return this.textContent;\n    },\n  });\n  function setText(value) {\n    text.textContent = value;\n  }\n  if (initialValue != null) {\n    setText(initialValue);\n  }\n  return [text, setText];\n}\nfunction useClassList(initialValue) {\n  const div = document.createElement(\"div\");\n  if (initialValue != null) {\n    div.className = className(initialValue);\n  }\n  let list = div.classList;\n  function ClassList(value) {\n    value.setAttribute(\"class\", list.value);\n    list = value.classList;\n  }\n  Object.defineProperties(\n    ClassList,\n    Object.getOwnPropertyDescriptors({\n      get size() {\n        return list.length;\n      },\n      get value() {\n        return list.value;\n      },\n      add() {\n        list.add(...arguments);\n      },\n      remove() {\n        list.remove(...arguments);\n      },\n      toggle(token, force) {\n        list.toggle(token, force);\n      },\n      contains(token) {\n        return list.contains(token);\n      },\n    }),\n  );\n  return ClassList;\n}\n\nfunction useMemo(factory) {\n  return factory();\n}\nfunction forwardRef(render) {\n  return (_ref) => {\n    let { ref, ...props } = _ref;\n    return render(props, ref ?? createRef());\n  };\n}\nfunction useImperativeHandle(ref, init) {\n  attachRef(ref, init());\n}\n\nconst cache = /* @__PURE__ */ new Map();\nconst createStyledComponent = (name) =>\n  function (list) {\n    for (\n      var _len = arguments.length,\n        interpolations = new Array(_len > 1 ? _len - 1 : 0),\n        _key = 1;\n      _key < _len;\n      _key++\n    ) {\n      interpolations[_key - 1] = arguments[_key];\n    }\n    return (_ref) => {\n      let { style, ...props } = _ref;\n      const lastIndex = list.length - 1;\n      const css =\n        list.slice(0, lastIndex).reduce((p, s, i) => {\n          const interpolation = interpolations[i];\n          const current =\n            typeof interpolation === \"function\"\n              ? interpolation(props)\n              : interpolation;\n          return p + s + current;\n        }, \"\") + list[lastIndex];\n      return createElement(name, {\n        style: [css, style],\n        ...props,\n      });\n    };\n  };\nconst baseStyled = (customComponent) => createStyledComponent(customComponent);\nconst styled = /* @__PURE__ */ new Proxy(baseStyled, {\n  get(_, name) {\n    return setIfAbsent(cache, name, () => createStyledComponent(name));\n  },\n});\nfunction setIfAbsent(map, key, getValue) {\n  if (map.has(key)) {\n    return map.get(key);\n  } else {\n    const value = getValue(key);\n    map.set(key, value);\n    return value;\n  }\n}\n\nvar index = {\n  Component,\n  PureComponent: Component,\n  createElement,\n  Fragment,\n  ShadowRoot,\n};\nfunction preventDefault(event) {\n  event.preventDefault();\n  return event;\n}\nfunction stopPropagation(event) {\n  event.stopPropagation();\n  return event;\n}\n\nexport {\n  Component,\n  Fragment,\n  Component as PureComponent,\n  SVGNamespace,\n  ShadowRoot,\n  Fragment as StrictMode,\n  className,\n  createElement,\n  createFactory,\n  createRef,\n  index as default,\n  forwardRef,\n  createElement as h,\n  isRef,\n  jsx,\n  jsx as jsxs,\n  identity as memo,\n  preventDefault,\n  stopPropagation,\n  styled,\n  identity as useCallback,\n  useClassList,\n  useImperativeHandle,\n  useMemo,\n  createRef as useRef,\n  useText,\n};\n","export const promiseWithResolvers = <T extends unknown = any>() => {\n  let resolve!: (value: T | PromiseLike<T>) => void\n  let reject!: (reason?: any) => void\n  const promise = new Promise<T>((res, rej) => {\n    resolve = res\n    reject = rej\n  })\n  return { promise, resolve, reject }\n}\n\nif (!Promise.withResolvers) {\n  Promise.withResolvers = promiseWithResolvers\n}\n","import type { Inject, InPageEdit, Schema } from '@inpageedit/core'\nimport { promiseWithResolvers } from './Promise.withResolvers'\n\nexport interface IPEPlugin {\n  name: string\n  inject?: Inject\n  apply: (ctx: InPageEdit) => Promise<void> | void\n  [k: string]: any\n}\n\nexport const defineIPEPlugin = (plugin: IPEPlugin): IPEPlugin => {\n  return plugin\n}\n\nexport class BasePlugin<K extends unknown = any> {\n  public name: string\n  public config: K\n  /** 依赖注入 */\n  static inject?: Inject = []\n  /** 可重用？ */\n  static reusable = false\n  /** 插件的偏好设置模式 */\n  static PreferencesSchema?: Schema\n\n  constructor(\n    public ctx: InPageEdit,\n    config: K = undefined as unknown as K,\n    name?: string\n  ) {\n    this.name = name || ''\n    this.config = config || ({} as K)\n    const { promise, resolve, reject } = promiseWithResolvers<void>()\n    queueMicrotask(() => {\n      if (!this.name) {\n        this.name = this.constructor.name\n      }\n      try {\n        const ret = this.start()\n        if (ret && typeof (ret as Promise<unknown>).then === 'function') {\n          ;(ret as Promise<unknown>)\n            .then(() => resolve())\n            .catch((err) => {\n              this.logger.error('start() returns a rejected promise', err)\n              reject(err)\n            })\n        } else {\n          resolve()\n        }\n      } catch (err) {\n        this.logger.error('start() threw synchronously', err)\n        reject(err)\n      }\n\n      promise.then(() => {\n        this.logger.debug('started')\n      })\n      promise.catch((e) => {\n        this.logger.error('start failed', e)\n        this.ctx.scope.dispose()\n      })\n    })\n    this.ctx.once('dispose', () => {\n      this.stop()\n      this.logger.debug('disposed')\n    })\n  }\n\n  protected start(): Promise<void> | void {}\n  protected stop(): Promise<void> | void {}\n\n  get logger() {\n    return this.ctx.logger(this.name)\n  }\n  get Schema() {\n    return this.ctx.schema\n  }\n}\n","import type { InPageEdit, IPEModal, IWikiPage } from '@inpageedit/core'\nimport { BasePlugin } from '~~/defineIPEPlugin.js'\nimport { useText } from 'jsx-dom'\n\ndeclare module '@inpageedit/core' {\n  interface InPageEdit {\n    quickDelete: PluginQuickDelete\n  }\n  interface Events {\n    'quick-delete/init-options'(\n      payload: Omit<QuickDeleteInitPayload, 'modal' | 'wikiPage'>\n    ): void\n    'quick-delete/show-modal'(\n      payload: Omit<QuickDeleteInitPayload, 'wikiPage'>\n    ): void\n    'quick-delete/delete-one'(\n      payload: QuickDeleteSubmitPayload & { ctx: InPageEdit }\n    ): void\n  }\n  interface PreferencesMap {\n    'quickDelete.reason': string\n  }\n}\n\nexport interface QuickDeleteOptions {\n  titles: string[]\n  deleteReason: string\n}\n\nexport interface QuickDeleteInitPayload {\n  ctx: InPageEdit\n  options: QuickDeleteOptions\n  modal: IPEModal\n  wikiPage: IWikiPage\n}\n\nexport interface QuickDeleteSubmitPayload {\n  wikiPage: IWikiPage\n  reason?: string\n  deletetalk?: boolean\n}\n\nconst createAbortError = () => {\n  // In browsers this is usually DOMException('AbortError'); use Error as a fallback for unified handling.\n  const err = new Error('Aborted')\n  ;(err as any).name = 'AbortError'\n  return err\n}\n\nconst sleep = (ms: number) => new Promise((resolve) => setTimeout(resolve, ms))\n\nconst sleepWithAbort = (ms: number, signal?: AbortSignal) => {\n  if (!signal) return sleep(ms)\n  if (signal.aborted) return Promise.reject(createAbortError())\n  return new Promise<void>((resolve, reject) => {\n    const timer = setTimeout(() => {\n      signal.removeEventListener('abort', onAbort)\n      resolve()\n    }, ms)\n    const onAbort = () => {\n      clearTimeout(timer)\n      signal.removeEventListener('abort', onAbort)\n      reject(createAbortError())\n    }\n    signal.addEventListener('abort', onAbort, { once: true })\n  })\n}\n\nexport class PluginQuickDelete extends BasePlugin {\n  static using = [\n    'api',\n    'currentPage',\n    'wiki',\n    'wikiPage',\n    'modal',\n    'preferences',\n  ]\n\n  constructor(public ctx: InPageEdit) {\n    super(ctx, {}, 'quick-delete')\n    ctx.set('quickDelete', this)\n  }\n\n  protected start(): Promise<void> | void {\n    this.ctx.inject(['toolbox'], (ctx) => {\n      this.injectToolbox(ctx)\n      ctx.on('dispose', () => {\n        this.removeToolbox(ctx)\n      })\n    })\n    this.ctx.inject(['analytics'], (ctx) => {\n      ctx.on('quick-delete/delete-one', (payload) => {\n        ctx.analytics.addEvent(\n          'quick-delete',\n          'delete-one',\n          payload.wikiPage.title\n        )\n      })\n    })\n\n    const Schema = this.ctx.schema\n    this.ctx.preferences.registerCustomConfig(\n      'quick-delete',\n      Schema.object({\n        'quickDelete.reason': Schema.string()\n          .description('Default delete reason for quick delete')\n          .default('[IPE-NEXT] Quick delete'),\n      })\n        .description('Quick delete options')\n        // @ts-ignore\n        .extra('category', 'editor'),\n      'editor'\n    )\n  }\n\n  protected stop(): Promise<void> | void {\n    if (this._modal) {\n      this._modal.close()\n    }\n  }\n\n  private _modal: IPEModal | null = null\n  async showModal(payload?: Partial<QuickDeleteOptions>) {\n    if (this._modal) {\n      this._modal.close()\n    }\n    payload = {\n      titles: [],\n      deleteReason:\n        (await this.ctx.preferences.get('quickDelete.reason')) || '',\n      reloadAfterDelete: true,\n      ...payload,\n    } as QuickDeleteOptions\n    this.ctx.emit('quick-delete/init-options', {\n      ctx: this.ctx,\n      options: payload as QuickDeleteOptions,\n    })\n\n    const modal = this.ctx.modal.show({\n      title: 'Batch Delete',\n      sizeClass: 'dialog',\n    })\n\n    const textarea = (\n      <textarea\n        name=\"titles\"\n        id=\"titles\"\n        rows={10}\n        placeholder=\"Enter the titles of the pages you want to delete, one per line.\"\n      >\n        {payload.titles!.join('\\n')}\n        {'\\n'}\n      </textarea>\n    ) as HTMLTextAreaElement\n    const form = (\n      <form\n        className=\"ipe-quickDelete-modal\"\n        style={{ display: 'grid', gap: '1rem' }}\n      >\n        <div className=\"ipe-input-box\">\n          <label htmlFor=\"titles\">\n            Enter the titles of the pages you want to delete, one per line.\n          </label>\n          {textarea}\n        </div>\n        <div className=\"ipe-input-box\">\n          <label htmlFor=\"reason\">Reason</label>\n          <input\n            type=\"text\"\n            name=\"reason\"\n            id=\"reason\"\n            value={payload.deleteReason}\n            placeholder=\"Enter the reason for deletion.\"\n          />\n        </div>\n        <div className=\"ipe-input-box\">\n          <label className=\"ipe-checkbox\">\n            <input type=\"checkbox\" id=\"deletetalk\" name=\"deletetalk\" />\n            <span className=\"ipe-checkbox-box\"></span>\n            <span>Delete talk pages, if exists</span>\n          </label>\n        </div>\n      </form>\n    ) as HTMLFormElement\n\n    modal.setContent(form)\n\n    modal.setButtons([\n      {\n        label: 'Cancel',\n        method: () => {\n          modal.close()\n        },\n      },\n      {\n        label: 'Delete',\n        className: 'is-danger',\n        method: async () => {\n          const formData = new FormData(form)\n          const titlesInput = formData.get('titles') as string\n          const reason = formData.get('reason') as string\n          const deleteTalk = formData.get('deletetalk') === 'on'\n          const titles = Array.from(\n            new Set(\n              titlesInput\n                .split('\\n')\n                .map((title) => title.trim())\n                .filter(Boolean)\n            )\n          )\n          textarea.value = titles.join('\\n') + '\\n'\n\n          const total = titles.length\n\n          if (total === 0) {\n            return\n          }\n\n          modal.setLoadingState(true)\n\n          const abortController = new AbortController()\n          const succeeded: string[] = []\n          const failed: { title: string; error: unknown }[] = []\n          let abortRequested = false\n\n          const overlay = this.ctx.modal.show({\n            title: 'Deleting...',\n            closeIcon: false,\n            outSideClose: false,\n            sizeClass: 'dialog',\n            buttons: [\n              {\n                id: 'abort-delete-button',\n                label: 'Cancel',\n                className: 'is-danger is-text',\n                method: () => {\n                  abortRequested = true\n                  abortController.abort()\n                },\n              },\n            ],\n          })\n          const [progressText, setProgressText] = useText('0')\n          const [currentTitleText, setCurrentTitleText] = useText('-')\n          const [successText, setSuccessText] = useText('0')\n          const [failedText, setFailedText] = useText('0')\n          const [pendingText, setPendingText] = useText(total.toString())\n          const [hintText, setHintText] = useText(\n            'Cancel will stop subsequent deletions (effective after the current request finishes).'\n          )\n\n          const logsUl = (\n            <ul style={{ margin: '0.25rem 0 0 1.25rem' }} />\n          ) as HTMLUListElement\n          const appendLog = (\n            kind: 'success' | 'fail' | 'info',\n            title: string,\n            msg?: string\n          ) => {\n            const color =\n              kind === 'success'\n                ? 'var(--ipe-modal-success)'\n                : kind === 'fail'\n                ? 'var(--ipe-modal-danger)'\n                : 'var(--ipe-modal-text-secondary)'\n            const li = (\n              <li>\n                <span style={{ color }}>\n                  {kind === 'success' ? '✔ ' : kind === 'fail' ? '✖ ' : '• '}\n                </span>\n                <strong>{title}</strong>\n                {msg ? <span> — {msg}</span> : null}\n              </li>\n            ) as HTMLLIElement\n            logsUl.appendChild(li)\n          }\n\n          overlay.setContent(\n            <div\n              className=\"theme-ipe-prose\"\n              style={{ display: 'grid', gap: '0.75rem' }}\n            >\n              <div>\n                <div>\n                  Progress <strong>{progressText}</strong> /{' '}\n                  <strong>{total}</strong> (remaining <strong>{pendingText}</strong>)\n                </div>\n                <div style=\"margin-top: 0.25rem;\">\n                  Current: <code>{currentTitleText}</code>\n                </div>\n                <div style=\"margin-top: 0.25rem; color: var(--ipe-modal-text-secondary);\">\n                  {hintText}\n                </div>\n              </div>\n              <div style=\"display: flex; gap: 1rem; flex-wrap: wrap;\">\n                <div>\n                   Success:{' '}\n                  <strong style=\"color: var(--ipe-modal-success);\">\n                    {successText}\n                  </strong>\n                </div>\n                <div>\n                   Failed:{' '}\n                  <strong style=\"color: var(--ipe-modal-danger);\">\n                    {failedText}\n                  </strong>\n                </div>\n              </div>\n              <div>\n                <div style=\"color: var(--ipe-modal-text-secondary);\">\n                   Log (appended in time order):\n                </div>\n                {logsUl}\n              </div>\n            </div>\n          )\n\n          const pending = titles.slice()\n          setPendingText(pending.length.toString())\n\n          while (pending.length) {\n            const title = pending[0]!\n            setCurrentTitleText(title)\n\n            if (abortController.signal.aborted) {\n              break\n            }\n\n            try {\n              await this.deleteOne(title, reason, deleteTalk)\n              succeeded.push(title)\n              setSuccessText(succeeded.length.toString())\n              appendLog('success', title)\n            } catch (error) {\n              failed.push({ title, error })\n              setFailedText(failed.length.toString())\n              appendLog('fail', title, (error as any)?.message || String(error))\n            } finally {\n              pending.shift()\n              setProgressText((total - pending.length).toString())\n              setPendingText(pending.length.toString())\n            }\n\n            if (pending.length) {\n              try {\n                await sleepWithAbort(1000, abortController.signal)\n              } catch (e) {\n                // Allow immediate cancel during the delay between requests\n                appendLog('info', 'Cancelled', 'Delay interrupted; stopping subsequent deletions.')\n                break\n              }\n            }\n          }\n\n          const unprocessed = pending.slice()\n\n          // Auto-refill \"failed + unprocessed\" titles back into the input for quick retry\n          const refill = Array.from(\n            new Set([...failed.map((x) => x.title), ...unprocessed])\n          )\n          textarea.value = refill.join('\\n') + (refill.length ? '\\n' : '')\n\n          modal.setLoadingState(false)\n\n          overlay.setTitle('Deletion Result')\n          overlay.removeButton('abort-delete-button')\n\n          if (abortRequested) {\n            setHintText(\n              'Cancelled: subsequent deletions stopped (effective after the current request finishes).'\n            )\n          }\n\n          overlay.setContent(\n            <div\n              className=\"theme-ipe-prose\"\n              style={{ display: 'grid', gap: '0.75rem' }}\n            >\n              <div style=\"display: flex; gap: 1rem; flex-wrap: wrap;\">\n                <div>\n                   Deleted:{' '}\n                  <strong style=\"color: var(--ipe-modal-success);\">\n                    {succeeded.length}\n                  </strong>\n                </div>\n                <div>\n                   Failed:{' '}\n                  <strong style=\"color: var(--ipe-modal-danger);\">\n                    {failed.length}\n                  </strong>\n                </div>\n                <div>\n                   Unprocessed:{' '}\n                  <strong style=\"color: var(--ipe-modal-warning);\">\n                    {unprocessed.length}\n                  </strong>\n                </div>\n              </div>\n\n              {(failed.length || unprocessed.length) && (\n                <div style=\"color: var(--ipe-modal-text-secondary);\">\n                   Titles for <strong>failed + unprocessed</strong> items have been refilled into the input. Click Delete to retry.\n                </div>\n              )}\n\n              {failed.length ? (\n                <div>\n                  <div style=\"color: var(--ipe-modal-danger);\">Failure details:</div>\n                  <ul style={{ margin: '0.25rem 0 0 1.25rem' }}>\n                    {failed.map(({ title, error }) => (\n                      <li key={title}>\n                        <strong>{title}</strong>\n                        <div style=\"color: var(--ipe-modal-text-secondary);\">\n                          {(error as any)?.message || String(error)}\n                        </div>\n                      </li>\n                    ))}\n                  </ul>\n                </div>\n              ) : null}\n\n              {unprocessed.length ? (\n                <div>\n                  <div style=\"color: var(--ipe-modal-warning);\">\n                    Unprocessed (usually due to cancellation):\n                  </div>\n                  <ul style={{ margin: '0.25rem 0 0 1.25rem' }}>\n                    {unprocessed.map((t) => (\n                      <li key={t}>\n                        <strong>{t}</strong>\n                      </li>\n                    ))}\n                  </ul>\n                </div>\n              ) : null}\n            </div>\n          )\n\n          overlay.setButtons([\n            {\n              label: 'OK',\n              className: 'is-primary',\n              method: () => {\n                overlay.close()\n              },\n            },\n          ])\n        },\n      },\n    ])\n    this.ctx.emit('quick-delete/show-modal', {\n      ctx: this.ctx,\n      modal,\n      options: payload as QuickDeleteOptions,\n    })\n\n    this._modal = modal\n    modal.on(modal.Event.Close, () => {\n      this._modal = null\n    })\n    return modal\n  }\n\n  async deleteOne(\n    title: string,\n    reason: string,\n    deletetalk: boolean\n  ): Promise<Awaited<ReturnType<IWikiPage['delete']>>> {\n    const page = this.ctx.wikiPage.newBlankPage({ title })\n    const result = await page.delete(reason, { deletetalk })\n    this.ctx.emit('quick-delete/delete-one', {\n      ctx: this.ctx,\n      wikiPage: page,\n      reason,\n      deletetalk,\n    })\n    return result\n  }\n\n  private async injectToolbox(ctx: InPageEdit) {\n    const title = this.ctx.currentPage.wikiTitle\n    const userHasRight = this.ctx.wiki.hasRight('delete')\n    const pageCanDelete = title && title.getNamespaceId() >= 0\n    ctx.toolbox.addButton({\n      id: 'quick-delete',\n      group: 'group2',\n      icon: (\n        <svg\n          xmlns=\"http://www.w3.org/2000/svg\"\n          width=\"24\"\n          height=\"24\"\n          viewBox=\"0 0 24 24\"\n          fill=\"none\"\n          stroke=\"currentColor\"\n          stroke-width=\"2\"\n          stroke-linecap=\"round\"\n          stroke-linejoin=\"round\"\n          class=\"icon icon-tabler icons-tabler-outline icon-tabler-trash\"\n        >\n          <path stroke=\"none\" d=\"M0 0h24v24H0z\" fill=\"none\" />\n          <path d=\"M4 7l16 0\" />\n          <path d=\"M10 11l0 6\" />\n          <path d=\"M14 11l0 6\" />\n          <path d=\"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12\" />\n          <path d=\"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3\" />\n        </svg>\n      ) as HTMLElement,\n      buttonProps: {\n        disabled: !userHasRight,\n      },\n      tooltip: userHasRight ? 'Batch Delete' : 'No permission',\n      onClick: () => {\n        this.showModal({\n          titles: title && pageCanDelete ? [title.getPrefixedText()] : [],\n        })\n      },\n    })\n  }\n\n  protected removeToolbox(ctx: InPageEdit) {\n    ctx.toolbox.removeButton('quick-delete')\n  }\n}\n\nconst _devMode = async (plugin: typeof PluginQuickDelete) => {\n  if ((window as any).__ipe_plugin_quickdelete) {\n    await (window as any).__ipe_plugin_quickdelete.dispose()\n  }\n  if (window.ipe) {\n    ;(window as any).__ipe_plugin_quickdelete = ipe.plugin(plugin)\n  }\n}\n\nif (import.meta.env.DEV) {\n  _devMode(PluginQuickDelete)\n}\n\nif (import.meta.hot) {\n  import.meta.hot.accept((module) => {\n    _devMode(module?.PluginQuickDelete as typeof PluginQuickDelete)\n  })\n}\n"],"names":["keys","isBoolean","val","isElement","isString","isNumber","isObject","isFunction","isComponentClass","Component","isArrayLike","obj","forEach","value","fn","key","isRef","maybeRef","isUnitlessNumber","prefixKey","prefix","prefixes","prop","jsxDomType","JsxDomType","isShadowRoot","el","SVGNamespace","XLinkNamespace","XMLNamespace","isVisibleChild","className","k","svg","nonPresentationSVGAttributes","initComponentClass","Class","attr","children","instance","node","attachRef","jsx","tag","_ref","attributes","appendChild","values","option","ref","child","appendChildren","appendChildToNode","shadowRoot","normalizeAttribute","s","separator","match","style","v","attribute","attrNS","dataValue","dataKey","eventHandler","eventName","useCapture","namespace","useText","initialValue","text","setText","promiseWithResolvers","resolve","reject","res","rej","_BasePlugin","ctx","config","name","promise","ret","err","e","BasePlugin","createAbortError","sleep","ms","sleepWithAbort","signal","timer","onAbort","_PluginQuickDelete","payload","Schema","modal","textarea","jsxs","form","formData","titlesInput","reason","deleteTalk","titles","title","total","abortController","succeeded","failed","abortRequested","overlay","progressText","setProgressText","currentTitleText","setCurrentTitleText","successText","setSuccessText","failedText","setFailedText","pendingText","setPendingText","hintText","setHintText","logsUl","appendLog","kind","msg","li","pending","error","unprocessed","refill","x","t","deletetalk","page","result","userHasRight","pageCanDelete","PluginQuickDelete"],"mappings":"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","x_google_ignoreList":[0]}